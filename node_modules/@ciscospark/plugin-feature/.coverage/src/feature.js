"use strict";
var __cov_kGeDUxrjJOe64VVlN2HDoQ = (Function('return this'))();
if (!__cov_kGeDUxrjJOe64VVlN2HDoQ.__coverage__) { __cov_kGeDUxrjJOe64VVlN2HDoQ.__coverage__ = {}; }
__cov_kGeDUxrjJOe64VVlN2HDoQ = __cov_kGeDUxrjJOe64VVlN2HDoQ.__coverage__;
if (!(__cov_kGeDUxrjJOe64VVlN2HDoQ['packages/node_modules/@ciscospark/plugin-feature/src/feature.js'])) {
   __cov_kGeDUxrjJOe64VVlN2HDoQ['packages/node_modules/@ciscospark/plugin-feature/src/feature.js'] = {"path":"packages/node_modules/@ciscospark/plugin-feature/src/feature.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"_interopRequireDefault","line":19,"loc":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"skip":true},"2":{"name":"getFeature","line":38,"loc":{"start":{"line":10,"column":35},"end":{"line":21,"column":36}}},"3":{"name":"setFeature","line":66,"loc":{"start":{"line":10,"column":35},"end":{"line":48,"column":34}}},"4":{"name":"(anonymous_4)","line":83,"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":12}}},"5":{"name":"setBundledFeatures","line":94,"loc":{"start":{"line":10,"column":35},"end":{"line":72,"column":34}}},"6":{"name":"(anonymous_6)","line":97,"loc":{"start":{"line":73,"column":24},"end":{"line":73,"column":34}}},"7":{"name":"(anonymous_7)","line":107,"loc":{"start":{"line":84,"column":12},"end":{"line":84,"column":12}}},"8":{"name":"initialize","line":111,"loc":{"start":{"line":10,"column":35},"end":{"line":87,"column":22}}}},"statementMap":{"1":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"2":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"3":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"4":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"5":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":0}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":0}},"8":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"9":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"10":{"start":{"line":10,"column":0},"end":{"line":10,"column":0}},"11":{"start":{"line":22,"column":4},"end":{"line":24,"column":5}},"12":{"start":{"line":23,"column":6},"end":{"line":23,"column":6}},"13":{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},"14":{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},"15":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"16":{"start":{"line":31,"column":6},"end":{"line":31,"column":6}},"17":{"start":{"line":34,"column":4},"end":{"line":36,"column":5}},"18":{"start":{"line":35,"column":6},"end":{"line":35,"column":6}},"19":{"start":{"line":38,"column":4},"end":{"line":38,"column":4}},"20":{"start":{"line":48,"column":34},"end":{"line":48,"column":34}},"21":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"22":{"start":{"line":51,"column":6},"end":{"line":51,"column":6}},"23":{"start":{"line":54,"column":4},"end":{"line":54,"column":4}},"24":{"start":{"line":64,"column":12},"end":{"line":64,"column":12}},"25":{"start":{"line":72,"column":34},"end":{"line":72,"column":34}},"26":{"start":{"line":73,"column":4},"end":{"line":73,"column":4}},"27":{"start":{"line":74,"column":6},"end":{"line":74,"column":6}},"28":{"start":{"line":75,"column":6},"end":{"line":75,"column":6}},"29":{"start":{"line":78,"column":4},"end":{"line":78,"column":4}},"30":{"start":{"line":84,"column":12},"end":{"line":84,"column":12}},"31":{"start":{"line":87,"column":22},"end":{"line":87,"column":22}},"32":{"start":{"line":87,"column":16},"end":{"line":87,"column":22}},"33":{"start":{"line":88,"column":4},"end":{"line":88,"column":4}},"34":{"start":{"line":90,"column":4},"end":{"line":90,"column":4}},"35":{"start":{"line":91,"column":4},"end":{"line":91,"column":4}},"36":{"start":{"line":92,"column":4},"end":{"line":92,"column":4}},"37":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}},"branchMap":{"1":{"line":19,"type":"cond-expr","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"2":{"line":19,"type":"binary-expr","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"3":{"line":39,"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":22,"column":4}},{"start":{"line":22,"column":4},"end":{"line":22,"column":4}}]},"4":{"line":39,"type":"binary-expr","locations":[{"start":{"line":22,"column":8},"end":{"line":22,"column":8}},{"start":{"line":22,"column":35},"end":{"line":22,"column":8}},{"start":{"line":22,"column":57},"end":{"line":22,"column":4}}]},"5":{"line":43,"type":"binary-expr","locations":[{"start":{"line":26,"column":14},"end":{"line":26,"column":14}},{"start":{"line":26,"column":25},"end":{"line":26,"column":4}}]},"6":{"line":47,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"7":{"line":51,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"8":{"line":70,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"9":{"line":70,"type":"binary-expr","locations":[{"start":{"line":50,"column":8},"end":{"line":50,"column":8}},{"start":{"line":50,"column":35},"end":{"line":50,"column":4}}]},"10":{"line":98,"type":"binary-expr","locations":[{"start":{"line":74,"column":21},"end":{"line":74,"column":21}},{"start":{"line":74,"column":21},"end":{"line":74,"column":6}}]},"11":{"line":99,"type":"binary-expr","locations":[{"start":{"line":75,"column":18},"end":{"line":75,"column":18}},{"start":{"line":75,"column":18},"end":{"line":75,"column":6}}]}}};
}
__cov_kGeDUxrjJOe64VVlN2HDoQ = __cov_kGeDUxrjJOe64VVlN2HDoQ['packages/node_modules/@ciscospark/plugin-feature/src/feature.js'];
__cov_kGeDUxrjJOe64VVlN2HDoQ.s['1']++;Object.defineProperty(exports,'__esModule',{value:true});__cov_kGeDUxrjJOe64VVlN2HDoQ.s['2']++;var _apply=require('babel-runtime/core-js/reflect/apply');__cov_kGeDUxrjJOe64VVlN2HDoQ.s['3']++;var _apply2=_interopRequireDefault(_apply);__cov_kGeDUxrjJOe64VVlN2HDoQ.s['4']++;var _promise=require('babel-runtime/core-js/promise');__cov_kGeDUxrjJOe64VVlN2HDoQ.s['5']++;var _promise2=_interopRequireDefault(_promise);__cov_kGeDUxrjJOe64VVlN2HDoQ.s['6']++;require('@ciscospark/plugin-wdm');__cov_kGeDUxrjJOe64VVlN2HDoQ.s['7']++;var _sparkCore=require('@ciscospark/spark-core');function _interopRequireDefault(obj){__cov_kGeDUxrjJOe64VVlN2HDoQ.f['1']++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['9']++;return(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['2'][0]++,obj)&&(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['2'][1]++,obj.__esModule)?(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['1'][0]++,obj):(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['1'][1]++,{default:obj});}__cov_kGeDUxrjJOe64VVlN2HDoQ.s['10']++;var Feature=_sparkCore.SparkPlugin.extend({namespace:'Feature',getFeature:function getFeature(keyType,key,options){__cov_kGeDUxrjJOe64VVlN2HDoQ.f['2']++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['11']++;if((__cov_kGeDUxrjJOe64VVlN2HDoQ.b['4'][0]++,keyType!=='developer')&&(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['4'][1]++,keyType!=='user')&&(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['4'][2]++,keyType!=='entitlement')){__cov_kGeDUxrjJOe64VVlN2HDoQ.b['3'][0]++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['12']++;return _promise2.default.reject(new Error('Invalid feature keyType provided. Only `developer`, `user`, and `entitlement` feature toggles are permitted.'));}else{__cov_kGeDUxrjJOe64VVlN2HDoQ.b['3'][1]++;}__cov_kGeDUxrjJOe64VVlN2HDoQ.s['13']++;options=(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['5'][0]++,options)||(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['5'][1]++,{});__cov_kGeDUxrjJOe64VVlN2HDoQ.s['14']++;var feature=this.spark.device.features[keyType].get(key);__cov_kGeDUxrjJOe64VVlN2HDoQ.s['15']++;if(!feature){__cov_kGeDUxrjJOe64VVlN2HDoQ.b['6'][0]++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['16']++;return _promise2.default.resolve(null);}else{__cov_kGeDUxrjJOe64VVlN2HDoQ.b['6'][1]++;}__cov_kGeDUxrjJOe64VVlN2HDoQ.s['17']++;if(options.full){__cov_kGeDUxrjJOe64VVlN2HDoQ.b['7'][0]++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['18']++;return _promise2.default.resolve(feature.serialize());}else{__cov_kGeDUxrjJOe64VVlN2HDoQ.b['7'][1]++;}__cov_kGeDUxrjJOe64VVlN2HDoQ.s['19']++;return _promise2.default.resolve(feature.value);},setFeature:function setFeature(keyType,key,value){__cov_kGeDUxrjJOe64VVlN2HDoQ.f['3']++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['20']++;var _this=this;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['21']++;if((__cov_kGeDUxrjJOe64VVlN2HDoQ.b['9'][0]++,keyType!=='developer')&&(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['9'][1]++,keyType!=='user')){__cov_kGeDUxrjJOe64VVlN2HDoQ.b['8'][0]++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['22']++;return _promise2.default.reject(new Error('Only `developer` and `user` feature toggles can be set.'));}else{__cov_kGeDUxrjJOe64VVlN2HDoQ.b['8'][1]++;}__cov_kGeDUxrjJOe64VVlN2HDoQ.s['23']++;return this.request({method:'POST',api:'feature',resource:'features/users/'+this.spark.device.userId+'/'+keyType,body:{key:key,mutable:true,val:value}}).then(function(res){__cov_kGeDUxrjJOe64VVlN2HDoQ.f['4']++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['24']++;return _this.spark.device.features[keyType].add(res.body,{merge:true});});},setBundledFeatures:function setBundledFeatures(featureList){__cov_kGeDUxrjJOe64VVlN2HDoQ.f['5']++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['25']++;var _this2=this;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['26']++;featureList.forEach(function(item){__cov_kGeDUxrjJOe64VVlN2HDoQ.f['6']++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['27']++;item.mutable=(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['10'][0]++,item.mutable)||(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['10'][1]++,'true');__cov_kGeDUxrjJOe64VVlN2HDoQ.s['28']++;item.type=(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['11'][0]++,item.type)||(__cov_kGeDUxrjJOe64VVlN2HDoQ.b['11'][1]++,'USER');});__cov_kGeDUxrjJOe64VVlN2HDoQ.s['29']++;return this.request({method:'POST',api:'feature',resource:'features/users/'+this.spark.device.userId+'/toggles',body:featureList}).then(function(res){__cov_kGeDUxrjJOe64VVlN2HDoQ.f['7']++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['30']++;return _this2.spark.device.features['user'].add(res.body,{merge:true});});},initialize:function initialize(){__cov_kGeDUxrjJOe64VVlN2HDoQ.f['8']++;__cov_kGeDUxrjJOe64VVlN2HDoQ.s['31']++;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){__cov_kGeDUxrjJOe64VVlN2HDoQ.s['32']++;args[_key]=arguments[_key];}__cov_kGeDUxrjJOe64VVlN2HDoQ.s['33']++;(0,_apply2.default)(_sparkCore.SparkPlugin.prototype.initialize,this,args);__cov_kGeDUxrjJOe64VVlN2HDoQ.s['34']++;this.listenToAndRun(this.spark,'change:device.features.developer',this.trigger.bind(this,'change:developer'));__cov_kGeDUxrjJOe64VVlN2HDoQ.s['35']++;this.listenToAndRun(this.spark,'change:device.features.entitlement',this.trigger.bind(this,'change:entitlement'));__cov_kGeDUxrjJOe64VVlN2HDoQ.s['36']++;this.listenToAndRun(this.spark,'change:device.features.user',this.trigger.bind(this,'change:user'));}});__cov_kGeDUxrjJOe64VVlN2HDoQ.s['37']++;exports.default=Feature;
